<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>11.5 Model chaining 6.x</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/howToSource.html"><strong>2</strong><span>How to use the example code</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/whyLearn.html"><strong>3</strong><span>Why should I learn Wicket?</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/helloWorld.html"><strong>4</strong><span>Wicket says &ldquo;Hello world!&rdquo;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/layout.html"><strong>5</strong><span>Wicket as page layout manager</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/keepControl.html"><strong>6</strong><span>Keeping control over HTML</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/componentLifecycle.html"><strong>7</strong><span>Components lifecycle</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/versioningCaching.html"><strong>8</strong><span>Page versioning and caching</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/requestProcessing.html"><strong>9</strong><span>Under the hood of the request processing</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/urls.html"><strong>10</strong><span>Wicket Links and URL generation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/modelsforms.html"><strong>11</strong><span>Wicket models and forms</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/repeaters.html"><strong>13</strong><span>Displaying multiple items with repeaters</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/i18n.html"><strong>14</strong><span>Internationalization with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/resources.html"><strong>15</strong><span>Resource management with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jsintegration.html"><strong>16</strong><span>An example of integration with JavaScript</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/advanced.html"><strong>17</strong><span>Wicket advanced topics</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/ajax.html"><strong>18</strong><span>Working with AJAX</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jee.html"><strong>19</strong><span>Integration with enterprise containers</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/nativewebsockets.html"><strong>20</strong><span>Native WebSockets</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/security.html"><strong>21</strong><span>Security with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testing.html"><strong>22</strong><span>Test Driven Development with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testingspring.html"><strong>23</strong><span>Test Driven Development with Wicket and Spring</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/bestpractices.html"><strong>24</strong><span>Wicket Best Practices</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/internals.html"><strong>25</strong><span>Wicket Internals</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/maven.html"><strong>26</strong><span>Working with Maven (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/wicketstuff.html"><strong>27</strong><span>Project WicketStuff (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/redirects.html"><strong>28</strong><span>Lost In Redirection With Apache Wicket (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/contributing.html"><strong>29</strong><span>Contributing to this guide (Appendix)</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        <span id="logo"><a href="/" target="_blank"><img height="80px" src="http://wicket.apache.org/guide/img/apache-wicket.png"/></a></span>
        
        
        <span id="sponsor"><a href="http://www.apache.org/" target="_blank"><img height="60px" src="http://wicket.apache.org/guide/img/asf_logo.gif"/></a></span>
        
    </div>
    <p>Free Online Guide for Apache Wicket framework</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/urls.html">&lt;&lt; <strong>10</strong><span>Wicket Links and URL generation</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span> >></a></div>
                


                <div class="project">
                    <h1>11.5 Model chaining - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Andrea Del Bene, Martin Grigorov, Carsten Hufe, Christian Kroemer, Daniel Bartl, Paul Bor»ô, Tobias Soloschenko</p>

                    <p><strong>Version:</strong> 6.x</p>

                    
                </div>

                

                

<h2 id="modelsforms_5">11.5 Model chaining</h2>
<p class="paragraph"/>Models that implement the interface <code>org.apache.wicket.model.IChainingModel</code> can be used to build a chain of models. These kinds of models are able to recognize whether their model object is itself an implementation of IModel and if so, they will call getObject on the wrapped model and the returned value will be the actual model object. In this way we can combine the action of an arbitrary number of models, making exactly a chain of models. Chaining models allows to combine different data persistence strategies, similarly to what we do with chains of <a href="http://java.sun.com/developer/technicalArticles/Streams/ProgIOStreams" target="blank">I/O streams.</a> To see model chaining in action we will build a page that implements the List/Detail View pattern, where we have a drop-down list of Person objects and a form to display and edit the data of the current selected Person.<p class="paragraph"/>The example page will look like this:<p class="paragraph"/><img border="0" class="center" src="../img/model-chaining.png"></img><p class="paragraph"/>What we want to do in this example is to chain the model of the DropDownChoice (which contains the selected Person) with the model of the Form. In this way the Form will work with the selected Person as backing object. The DropDownChoice component can be configured to automatically update its model each time we change the selected item on the client side. All we have to do is to override method wantOnSelectionChangedNotifications to make it return true. In practice, when this method returns true, DropDownChoice will submit its value every time JavaScript event onChange occurs, and its model will be consequently updated. To leverage this functionality, DropDownChoice doesn't need to be inside a form.<p class="paragraph"/>The following is the resulting markup of the example page:<p class="paragraph"/><div class="code"><pre>&#8230;
&#60;body&#62;
	List of persons &#60;select wicket:id=<span class="java&#45;quote">"persons"</span>&#62;&#60;/select&#62; &#60;br/&#62;
	&#60;br/&#62;
	&#60;form wicket:id=<span class="java&#45;quote">"form"</span>&#62;		
		&#60;div style=<span class="java&#45;quote">"display: table;"</span>&#62;
			&#60;div style=<span class="java&#45;quote">"display: table&#45;row;"</span>&#62;
				&#60;div style=<span class="java&#45;quote">"display: table&#45;cell;"</span>&#62;Name: &#60;/div&#62;
				&#60;div style=<span class="java&#45;quote">"display: table&#45;cell;"</span>&#62;
					&#60;input type=<span class="java&#45;quote">"text"</span> wicket:id=<span class="java&#45;quote">"name"</span>/&#62; 
				&#60;/div&#62;	
			&#60;/div&#62;
			&#60;div style=<span class="java&#45;quote">"display: table&#45;row;"</span>&#62;
				&#60;div style=<span class="java&#45;quote">"display: table&#45;cell;"</span>&#62;Surname: &#60;/div&#62;
				&#60;div style=<span class="java&#45;quote">"display: table&#45;cell;"</span>&#62;
									&#60;input type=<span class="java&#45;quote">"text"</span> wicket:id=<span class="java&#45;quote">"surname"</span>/&#62;
								&#60;/div&#62;	
							&#60;/div&#62;
							&#60;div style=<span class="java&#45;quote">"display: table&#45;row;"</span>&#62;
								&#60;div style=<span class="java&#45;quote">"display: table&#45;cell;"</span>&#62;Address: &#60;/div&#62;
								&#60;div style=<span class="java&#45;quote">"display: table&#45;cell;"</span>&#62;
									&#60;input type=<span class="java&#45;quote">"text"</span> wicket:id=<span class="java&#45;quote">"address"</span>/&#62;
								&#60;/div&#62;	
							&#60;/div&#62;
							&#60;div style=<span class="java&#45;quote">"display: table&#45;row;"</span>&#62;
								&#60;div style=<span class="java&#45;quote">"display: table&#45;cell;"</span>&#62;Email: &#60;/div&#62;
								&#60;div style=<span class="java&#45;quote">"display: table&#45;cell;"</span>&#62;
									&#60;input type=<span class="java&#45;quote">"text"</span> wicket:id=<span class="java&#45;quote">"email"</span>/&#62;
								&#60;/div&#62;
							&#60;/div&#62;
						&#60;/div&#62;	
						&#60;input type=<span class="java&#45;quote">"submit"</span> value=<span class="java&#45;quote">"Save"</span>/&#62;
					&#60;/form&#62;
				&#60;/body&#62;</pre></div><p class="paragraph"/>The initialization code for DropDownChoice is the following:<p class="paragraph"/><div class="code"><pre>Model&#60;Person&#62; listModel = <span class="java&#45;keyword">new</span> Model&#60;Person&#62;();
ChoiceRenderer&#60;Person&#62; personRender = <span class="java&#45;keyword">new</span> ChoiceRenderer&#60;Person&#62;(<span class="java&#45;quote">"fullName"</span>);
personsList = <span class="java&#45;keyword">new</span> DropDownChoice&#60;Person&#62;(<span class="java&#45;quote">"persons"</span>, listModel, loadPersons(), personRender)&#123;<p class="paragraph"/>		@Override
		<span class="java&#45;keyword">protected</span> <span class="java&#45;object">boolean</span> wantOnSelectionChangedNotifications() &#123;
			<span class="java&#45;keyword">return</span> <span class="java&#45;keyword">true</span>;
		&#125;<p class="paragraph"/>&#125;;</pre></div><p class="paragraph"/>As choice render we have used the basic implementation provided with the org.apache.wicket .markup.html.form.ChoiceRenderer class that we have seen in the previous paragraph. loadPersons() is just an utility method which generates a list of Person instances. The model for DropDownChoice is a simple instance of the Model class.<p class="paragraph"/>Here is the whole code of the page (except for the loadPersons() method):<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> class PersonListDetails <span class="java&#45;keyword">extends</span> WebPage &#123;
  <span class="java&#45;keyword">private</span> Form form;
  <span class="java&#45;keyword">private</span> DropDownChoice&#60;Person&#62; personsList;<p class="paragraph"/>  <span class="java&#45;keyword">public</span> PersonListDetails()&#123;
    Model&#60;Person&#62; listModel = <span class="java&#45;keyword">new</span> Model&#60;Person&#62;();
    ChoiceRenderer&#60;Person&#62; personRender = <span class="java&#45;keyword">new</span> ChoiceRenderer&#60;Person&#62;(<span class="java&#45;quote">"fullName"</span>);<p class="paragraph"/>    personsList = <span class="java&#45;keyword">new</span> DropDownChoice&#60;Person&#62;(<span class="java&#45;quote">"persons"</span>, listModel, loadPersons(),
                                                         personRender)&#123;
      @Override
      <span class="java&#45;keyword">protected</span> <span class="java&#45;object">boolean</span> wantOnSelectionChangedNotifications() &#123;
        <span class="java&#45;keyword">return</span> <span class="java&#45;keyword">true</span>;
      &#125;
	    &#125;;<p class="paragraph"/>	    add(personsList);<p class="paragraph"/>	    form = <span class="java&#45;keyword">new</span> Form(<span class="java&#45;quote">"form"</span>, <span class="java&#45;keyword">new</span> CompoundPropertyModel&#60;Person&#62;(listModel));    
	    form.add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"name"</span>));
	    form.add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"surname"</span>));
	    form.add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"address"</span>));
	    form.add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"email"</span>));<p class="paragraph"/>	    add(form);
	  &#125;
	       //loadPersons()
	       //&#8230;
	&#125;</pre></div><p class="paragraph"/>The two models work together as a pipeline where the output of method getObject of Model is the model object of CompoundPropertyModel. As we have seen, model chaining allows us to combine the actions of two or more models without creating new custom implementations.


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/urls.html">&lt;&lt; <strong>10</strong><span>Wicket Links and URL generation</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
Copyright &copy; 2013-2015 ‚Äî <a href="http://www.apache.org/" target="_blank">The Apache Software Foundation</a> 
                      ‚Äî <b style="color:#E8590A !important;">(Generated on: 2015-04-10)</b>

    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
