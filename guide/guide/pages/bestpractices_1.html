<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>24.1 Encapsulate components correctly 6.x</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/howToSource.html"><strong>2</strong><span>How to use the example code</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/whyLearn.html"><strong>3</strong><span>Why should I learn Wicket?</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/helloWorld.html"><strong>4</strong><span>Wicket says &ldquo;Hello world!&rdquo;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/layout.html"><strong>5</strong><span>Wicket as page layout manager</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/keepControl.html"><strong>6</strong><span>Keeping control over HTML</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/componentLifecycle.html"><strong>7</strong><span>Components lifecycle</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/versioningCaching.html"><strong>8</strong><span>Page versioning and caching</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/requestProcessing.html"><strong>9</strong><span>Under the hood of the request processing</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/urls.html"><strong>10</strong><span>Wicket Links and URL generation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/modelsforms.html"><strong>11</strong><span>Wicket models and forms</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/repeaters.html"><strong>13</strong><span>Displaying multiple items with repeaters</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/i18n.html"><strong>14</strong><span>Internationalization with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/resources.html"><strong>15</strong><span>Resource management with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jsintegration.html"><strong>16</strong><span>An example of integration with JavaScript</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/advanced.html"><strong>17</strong><span>Wicket advanced topics</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/ajax.html"><strong>18</strong><span>Working with AJAX</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jee.html"><strong>19</strong><span>Integration with enterprise containers</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/nativewebsockets.html"><strong>20</strong><span>Native WebSockets</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/security.html"><strong>21</strong><span>Security with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testing.html"><strong>22</strong><span>Test Driven Development with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testingspring.html"><strong>23</strong><span>Test Driven Development with Wicket and Spring</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/bestpractices.html"><strong>24</strong><span>Wicket Best Practices</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/internals.html"><strong>25</strong><span>Wicket Internals</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/maven.html"><strong>26</strong><span>Working with Maven (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/wicketstuff.html"><strong>27</strong><span>Project WicketStuff (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/redirects.html"><strong>28</strong><span>Lost In Redirection With Apache Wicket (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/contributing.html"><strong>29</strong><span>Contributing to this guide (Appendix)</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        <span id="logo"><a href="/" target="_blank"><img height="80px" src="http://wicket.apache.org/guide/img/apache-wicket.png"/></a></span>
        
        
        <span id="sponsor"><a href="http://www.apache.org/" target="_blank"><img height="60px" src="http://wicket.apache.org/guide/img/asf_logo.gif"/></a></span>
        
    </div>
    <p>Free Online Guide for Apache Wicket framework</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/testingspring.html">&lt;&lt; <strong>23</strong><span>Test Driven Development with Wicket and Spring</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/internals.html"><strong>25</strong><span>Wicket Internals</span> >></a></div>
                


                <div class="project">
                    <h1>24.1 Encapsulate components correctly - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Andrea Del Bene, Martin Grigorov, Carsten Hufe, Christian Kroemer, Daniel Bartl, Paul Bor»ô</p>

                    <p><strong>Version:</strong> 6.x</p>

                    
                </div>

                

                

<h2 id="bestpractices_1">24.1 Encapsulate components correctly</h2>
<p class="paragraph"/>A component should be self-contained. The user of a component should neither have to know nor care about its internal structure. She should just be familiar with its external interfaces and its documentation in order to be able to use it. This means in detail: Every component that extends Wicket's own Panel type (thus is a Panel itself) must provide its own HTML template. In contrast, when a component extends the classes <code>WebMarkupContainer</code> or <code>Form</code>, there is no HTML template. This implies that you should add components through composition in <code>WebMarkupContainer</code> or <code>Form</code>.<p class="paragraph"/><strong class="bold">Listing 1:</strong><p class="paragraph"/><div class="code"><pre>// Poor component
<span class="java&#45;keyword">public</span> class RegistrationForm <span class="java&#45;keyword">extends</span> Form&#60;Registration&#62; &#123;
    <span class="java&#45;keyword">public</span> RegistrationForm(<span class="java&#45;object">String</span> id, IModel&#60;Registration&#62; regModel) &#123;
        <span class="java&#45;keyword">super</span>(id, <span class="java&#45;keyword">new</span> CompoundPropertyModel&#60;Registration&#62;(regModel))
        // Wrong: RegistrationForm provides its own components
        add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"username"</span>));
        add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"firstname"</span>));
        add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"lastname"</span>));
    &#125;
&#125;</pre></div><p class="paragraph"/>This snippet is an example for a poor component. The user of the <code>RegistrationForm</code> must know the internal structure of the markup and component in order to use it.<p class="paragraph"/><strong class="bold">Listing 2:</strong><p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> class RegistrationPage <span class="java&#45;keyword">extends</span> Page &#123;
    <span class="java&#45;keyword">public</span> RegistrationPage(IModel&#60;Registration&#62; regModel) &#123;
        Form&#60;?&#62; form = <span class="java&#45;keyword">new</span> RegistrationForm(<span class="java&#45;quote">"form"</span>);
        form.add(<span class="java&#45;keyword">new</span> SubmitButton(<span class="java&#45;quote">"register"</span>) &#123;
            <span class="java&#45;keyword">public</span> void onSubmit() &#123;
                 // <span class="java&#45;keyword">do</span> something
            &#125;
        &#125;);
        add(form);
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>&#60;html&#62;
&#60;body&#62;
    &#60;form wicket:id=<span class="java&#45;quote">"form"</span>&#62;
        &#60;!&#45;&#45; These are internal structure information from RegistrationForm &#45;&#45;&#62;
        Username &#60;input type=<span class="java&#45;quote">"text"</span> wicket:id=<span class="java&#45;quote">"username"</span>/&#62;
        First name &#60;input type=<span class="java&#45;quote">"text"</span> wicket:id=<span class="java&#45;quote">"firstname"</span>/&#62;
        Last name &#60;input type=<span class="java&#45;quote">"text"</span> wicket:id=<span class="java&#45;quote">"lastname"</span>/&#62;
        &#60;!&#45;&#45; Above <span class="java&#45;keyword">new</span> components from page which the user knows  &#45;&#45;&#62;
        &#60;input type=<span class="java&#45;quote">"submit"</span> wicket:id=<span class="java&#45;quote">"register"</span> value=<span class="java&#45;quote">"Register"</span>/&#62;
    &#60;/form&#62;
&#60;/body&#62;
&#60;/html&#62;</pre></div><p class="paragraph"/>The code above shows the usage of the poor component in the <code>RegistrationPage</code>. You can see that the input fields <code>firstname</code>, <code>lastname</code> and <code>username</code> get used, even though these components are not added explicitly to the <code>RegistrationPage</code>. Avoid this, because other developers cannot directly see that the components were added in <code>RegistrationPage</code> class.<p class="paragraph"/><strong class="bold">Listing 3:</strong><p class="paragraph"/><div class="code"><pre>// Good component
<span class="java&#45;keyword">public</span> class RegistrationInputPanel <span class="java&#45;keyword">extends</span> Panel&#123;
    <span class="java&#45;keyword">public</span> RegistrationInputPanel(<span class="java&#45;object">String</span> id, IModel&#60;Registration&#62; regModel) &#123;
        <span class="java&#45;keyword">super</span>(id, regModel);
        IModel&#60;Registration&#62; compound = <span class="java&#45;keyword">new</span> CompoundPropertyModel&#60;Registration(regmodel)
        Form&#60;Registration&#62; form = <span class="java&#45;keyword">new</span> Form&#60;Registration&#62;(<span class="java&#45;quote">"form"</span>, compound);
        // Correct: Add components to Form over the instance variable
        form.add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"username"</span>));
        form.add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"firstname"</span>));
        form.add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"lastname"</span>));
        add(form);
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>&#60;html&#62;
&#60;body&#62;
    &#60;wicket:panel&#62;
    &#60;form wicket:id=<span class="java&#45;quote">"form"</span>&#62;
        Username &#60;input type=<span class="java&#45;quote">"text"</span> wicket:id=<span class="java&#45;quote">"username"</span>/&#62;
        First name &#60;input type=<span class="java&#45;quote">"text"</span> wicket:id=<span class="java&#45;quote">"firstname"</span>/&#62;
        Last name &#60;input type=<span class="java&#45;quote">"text"</span> wicket:id=<span class="java&#45;quote">"lastname"</span>/&#62;
    &#60;/form&#62;
    &#60;/wicket:panel&#62;
&#60;/body&#62;
&#60;/html&#62;</pre></div><p class="paragraph"/>Now we have a properly encapsulated input component which provides its own markup. Furthermore you can see the correct usage of a Wicket <code>Form</code>. The components get added by calling <code>form.add(Component)</code> on the instance variable. On the other hand, it is allowed to add behaviours and validators over inheritance, because those do not have markup ids which must be bound.<p class="paragraph"/>With that, the usage of <code>RegistrationInputPanel</code> is much more intuitive. There is no markup of other embedded components present anymore, just markup of components which get directly added. The <code>RegistrationPage</code> provides its own form that delegates the submit to all Wicket nested forms which are contained in the component tree.<p class="paragraph"/><strong class="bold">Listing 4:</strong><p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> class RegistrationPage <span class="java&#45;keyword">extends</span> Page &#123;
    <span class="java&#45;keyword">public</span> RegistrationPage(IModel&#60;Registration&#62; regModel) &#123;
        Form&#60;?&#62; form = <span class="java&#45;keyword">new</span> Form(<span class="java&#45;quote">"form"</span>);
        form.add(<span class="java&#45;keyword">new</span> RegistrationInputPanel(<span class="java&#45;quote">"registration"</span>, regModel);
        form.add(<span class="java&#45;keyword">new</span> SubmitButton(<span class="java&#45;quote">"register"</span>) &#123;
            <span class="java&#45;keyword">public</span> void onSubmit() &#123;
              // <span class="java&#45;keyword">do</span> something
            &#125;
        &#125;);
        add(form);
    &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>&#60;html&#62;
&#60;body&#62;
    &#60;form wicket:id=<span class="java&#45;quote">"form"</span>&#62;
        &#60;div wicket:id=<span class="java&#45;quote">"registration"</span>&#62;
           Display the RegistrationInputPanel
        &#60;/div&#62;
        &#60;input type=&#38;rdquo;submit&#38;rdquo; wicket:id=<span class="java&#45;quote">"register"</span> value=<span class="java&#45;quote">"Register"</span>/&#62;
    &#60;/form&#62;
&#60;/body&#62;
&#60;/html&#62;</pre></div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/testingspring.html">&lt;&lt; <strong>23</strong><span>Test Driven Development with Wicket and Spring</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/internals.html"><strong>25</strong><span>Wicket Internals</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
Copyright &copy; 2013-2014 ‚Äî <a href="http://www.apache.org/" target="_blank">The Apache Software Foundation</a> 
                      ‚Äî <b style="color:#E8590A !important;">(Generated on: 2015-02-03)</b>

    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
