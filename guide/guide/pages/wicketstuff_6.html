<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>26.6 Module wicketstuff-rest-annotations 6.x</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/howToSource.html"><strong>2</strong><span>How to use the example code</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/whyLearn.html"><strong>3</strong><span>Why should I learn Wicket?</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/helloWorld.html"><strong>4</strong><span>Wicket says &ldquo;Hello world!&rdquo;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/layout.html"><strong>5</strong><span>Wicket as page layout manager</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/keepControl.html"><strong>6</strong><span>Keeping control over HTML</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/componentLifecycle.html"><strong>7</strong><span>Components lifecycle</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/versioningCaching.html"><strong>8</strong><span>Page versioning and caching</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/requestProcessing.html"><strong>9</strong><span>Under the hood of the request processing</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/urls.html"><strong>10</strong><span>Wicket Links and URL generation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/modelsforms.html"><strong>11</strong><span>Wicket models and forms</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/repeaters.html"><strong>13</strong><span>Displaying multiple items with repeaters</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/i18n.html"><strong>14</strong><span>Internationalization with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/resources.html"><strong>15</strong><span>Resource management with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jsintegration.html"><strong>16</strong><span>An example of integration with JavaScript</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/advanced.html"><strong>17</strong><span>Wicket advanced topics</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/ajax.html"><strong>18</strong><span>Working with AJAX</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jee.html"><strong>19</strong><span>Integration with enterprise containers</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/nativewebsockets.html"><strong>20</strong><span>Native WebSockets</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/security.html"><strong>21</strong><span>Security with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testing.html"><strong>22</strong><span>Test Driven Development with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testingspring.html"><strong>23</strong><span>Test Driven Development with Wicket and Spring</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/bestpractices.html"><strong>24</strong><span>Wicket Best Practices</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/maven.html"><strong>25</strong><span>Working with Maven (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/wicketstuff.html"><strong>26</strong><span>Project WicketStuff (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/redirects.html"><strong>27</strong><span>Lost In Redirection With Apache Wicket (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/contributing.html"><strong>28</strong><span>Contributing to this guide (Appendix)</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        <span id="logo"><a href="/" target="_blank"><img height="80px" src="http://wicket.apache.org/guide/img/apache-wicket.png"/></a></span>
        
        
        <span id="sponsor"><a href="http://www.apache.org/" target="_blank"><img height="60px" src="http://wicket.apache.org/guide/img/asf_logo.gif"/></a></span>
        
    </div>
    <p>Free Online Guide for Apache Wicket framework</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/maven.html">&lt;&lt; <strong>25</strong><span>Working with Maven (Appendix)</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/redirects.html"><strong>27</strong><span>Lost In Redirection With Apache Wicket (Appendix)</span> >></a></div>
                


                <div class="project">
                    <h1>26.6 Module wicketstuff-rest-annotations - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Andrea Del Bene, Martin Grigorov, Carsten Hufe, Christian Kroemer, Daniel Bartl, Paul Borș</p>

                    <p><strong>Version:</strong> 6.x</p>

                    
                </div>

                

                

<h2 id="wicketstuff_6">26.6 Module wicketstuff-rest-annotations</h2>
REST-based API are becoming more and more popular around the web and the number of services based on this architecture is constantly increasing.<p class="paragraph"/>Wicket is well-known for its capability of transparently handling the state of web applications on server side, but it can be also easily adopted to create RESTful services.
WicketStuff module for REST provides a special resource class and a set of annotations to implement REST APIs/services in much the same way as we do it with Spring MVC or with the standard JAX-RS.<p class="paragraph"/>The module provides class <code>AbstractRestResource</code> as generic abstract class to implement a Wicket resource that handles the request and the response using a particular data format (XML, JSON, etc...).
Subclassing <code>AbstractRestResource</code> we can create custom resources and map their pubblic methods to a given subpath with annotation <code>MethodMapping</code>. The following snippet is taken from resource <code>PersonsRestResource</code> inside module <code>'restannotations-examples'</code>:<p class="paragraph"/><div class="code"><pre>@MethodMapping(<span class="java&#45;quote">"/persons"</span>)
    <span class="java&#45;keyword">public</span> List&#60;PersonPojo&#62; getAllPersons() &#123;
        //method mapped at subpath <span class="java&#45;quote">"/persons"</span> and HTTP method GET
    &#125;<p class="paragraph"/>    @MethodMapping(value = <span class="java&#45;quote">"/persons/&#123;personIndex&#125;"</span>, httpMethod = HttpMethod.DELETE)
    <span class="java&#45;keyword">public</span> void deletePerson(<span class="java&#45;object">int</span> personIndex) &#123;
        //method mapped at subpath <span class="java&#45;quote">"/persons/&#123;personIndex&#125;"</span> and HTTP method DELETE. 
        //Segment &#123;personIndex&#125; will contain an integer value as index.
    &#125;<p class="paragraph"/>    @MethodMapping(value = <span class="java&#45;quote">"/persons"</span>, httpMethod = HttpMethod.POST)
    <span class="java&#45;keyword">public</span> void createPerson(@RequestBody PersonPojo personPojo) &#123;
        //creates a <span class="java&#45;keyword">new</span> instance of PersonPojo reading it from request body
    &#125;</pre></div><p class="paragraph"/><code>MethodMapping</code> requires to specify the subpath we want to map the method to. In addition we can specify also the HTTP method that must be used to invoke the method via REST (GET, POST, DELETE, PATCH, etc...). This value can be specified with enum class <code>HttpMethod</code> and is GET by default. 
In the code above we can see annotation <code>RequestBody</code> which is used to extract the value of a method parameter from the request body (method createPerson).
To write/read objects to response/from request, <code>AbstractRestResource</code> uses an implementation of interface <code>IWebSerialDeserial</code> which defines the following methods:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> <span class="java&#45;keyword">interface</span> IWebSerialDeserial &#123;<p class="paragraph"/>       <span class="java&#45;keyword">public</span> void objectToResponse(<span class="java&#45;object">Object</span> targetObject, WebResponse response, <span class="java&#45;object">String</span> mimeType) <span class="java&#45;keyword">throws</span> Exception;<p class="paragraph"/>       <span class="java&#45;keyword">public</span> &#60;T&#62; T requestToObject(WebRequest request, <span class="java&#45;object">Class</span>&#60;T&#62; argClass, <span class="java&#45;object">String</span> mimeType) <span class="java&#45;keyword">throws</span> Exception;<p class="paragraph"/>       <span class="java&#45;keyword">public</span> <span class="java&#45;object">boolean</span> isMimeTypeSupported(<span class="java&#45;object">String</span> mimeType);
    &#125;</pre></div><p class="paragraph"/>To convert segments value (which are strings) to parameters type, <code>AbstractRestResource</code> uses the standard Wicket mechanism based on the application converter locator:<p class="paragraph"/><div class="code"><pre>//<span class="java&#45;keyword">return</span> the converter <span class="java&#45;keyword">for</span> type clazz
    IConverter converter = Application.get().getConverterLocator().getConverter(clazz);
    //convert string to object
    <span class="java&#45;keyword">return</span> converter.convertToObject(value, Session.get().getLocale());</pre></div><p class="paragraph"/>In order to promote the principle of convention over configuration, we don't need to use any annotation to map method parameters to path parameters if they are declared in the same order. If we need to manually bind method parameters to path parameters we can use annotation <code>PathParam</code>.<p class="paragraph"/><div class="code"><pre>@MethodMapping(value = <span class="java&#45;quote">"/variable/&#123;p1&#125;/order/&#123;p2&#125;"</span>, produces = RestMimeTypes.PLAIN_TEXT)
    <span class="java&#45;keyword">public</span> <span class="java&#45;object">String</span> testParamOutOfOrder(<code>PathParam(<span class="java&#45;quote">"p2"</span>) <span class="java&#45;object">String</span> textParam, </code>PathParam(<span class="java&#45;quote">"p1"</span>) <span class="java&#45;object">int</span> intParam) &#123;
        //method parameter textParam is taken from path param 'p2', <span class="java&#45;keyword">while</span> intParam uses 'p1'
    &#125;</pre></div><p class="paragraph"/>As JSON is de-facto standard format for REST API, the project comes also with a ready-to-use resource (<code>GsonRestResource</code>) and a serial/deserial (<code>GsonSerialDeserial</code>) that work with JSON format (both inside module <code>'restannotations-json'</code>). These classes use Gson as JSON library.<p class="paragraph"/><code>AbstractRestResource</code> supports role-based authorizations for mapped method with annotation <code>AuthorizeInvocation</code>:<p class="paragraph"/><div class="code"><pre>@MethodMapping(value = <span class="java&#45;quote">"/admin"</span>, httpMethod = HttpMethod.GET)
    @AuthorizeInvocation(<span class="java&#45;quote">"ROLE_ADMIN"</span>)
    <span class="java&#45;keyword">public</span> void testMethodAdminAuth() &#123;<p class="paragraph"/>    &#125;</pre></div><p class="paragraph"/>To use annotation <code>AuthorizeInvocation</code> we must specify in the resource construcor an instance of Wicket interface <code>IRoleCheckingStrategy</code>.<p class="paragraph"/>To read the complete documentation of the module and to discover more advanced feature please refer to the <a href="https://github.com/wicketstuff/core/blob/master/jdk-1.7-parent/wicketstuff-restannotations-parent" target="blank">project homepage</a>



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/maven.html">&lt;&lt; <strong>25</strong><span>Working with Maven (Appendix)</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/redirects.html"><strong>27</strong><span>Lost In Redirection With Apache Wicket (Appendix)</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
Copyright &copy; 2013-2014 — <a href="http://www.apache.org/" target="_blank">The Apache Software Foundation</a> 
                      — <b style="color:#E8590A !important;">(Generated on: 2014-09-06)</b>

    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
