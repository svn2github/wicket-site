<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>11.3 Wicket forms 6.x</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/howToSource.html"><strong>2</strong><span>How to use the example code</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/whyLearn.html"><strong>3</strong><span>Why should I learn Wicket?</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/helloWorld.html"><strong>4</strong><span>Wicket says &ldquo;Hello world!&rdquo;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/layout.html"><strong>5</strong><span>Wicket as page layout manager</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/keepControl.html"><strong>6</strong><span>Keeping control over HTML</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/componentLifecycle.html"><strong>7</strong><span>Components lifecycle</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/versioningCaching.html"><strong>8</strong><span>Page versioning and caching</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/requestProcessing.html"><strong>9</strong><span>Under the hood of the request processing</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/urls.html"><strong>10</strong><span>Wicket Links and URL generation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/modelsforms.html"><strong>11</strong><span>Wicket models and forms</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/repeaters.html"><strong>13</strong><span>Displaying multiple items with repeaters</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/i18n.html"><strong>14</strong><span>Internationalization with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/resources.html"><strong>15</strong><span>Resource management with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jsintegration.html"><strong>16</strong><span>An example of integration with JavaScript</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/advanced.html"><strong>17</strong><span>Wicket advanced topics</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/ajax.html"><strong>18</strong><span>Working with AJAX</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jee.html"><strong>19</strong><span>Integration with enterprise containers</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/nativewebsockets.html"><strong>20</strong><span>Native WebSockets</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/security.html"><strong>21</strong><span>Security with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testing.html"><strong>22</strong><span>Test Driven Development with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testingspring.html"><strong>23</strong><span>Test Driven Development with Wicket and Spring</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/bestpractices.html"><strong>24</strong><span>Wicket Best Practices</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/internals.html"><strong>25</strong><span>Wicket Internals</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/maven.html"><strong>26</strong><span>Working with Maven (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/wicketstuff.html"><strong>27</strong><span>Project WicketStuff (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/redirects.html"><strong>28</strong><span>Lost In Redirection With Apache Wicket (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/contributing.html"><strong>29</strong><span>Contributing to this guide (Appendix)</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        <span id="logo"><a href="/" target="_blank"><img height="80px" src="http://wicket.apache.org/guide/img/apache-wicket.png"/></a></span>
        
        
        <span id="sponsor"><a href="http://www.apache.org/" target="_blank"><img height="60px" src="http://wicket.apache.org/guide/img/asf_logo.gif"/></a></span>
        
    </div>
    <p>Free Online Guide for Apache Wicket framework</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/urls.html">&lt;&lt; <strong>10</strong><span>Wicket Links and URL generation</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span> >></a></div>
                


                <div class="project">
                    <h1>11.3 Wicket forms - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Andrea Del Bene, Martin Grigorov, Carsten Hufe, Christian Kroemer, Daniel Bartl, Paul Bor»ô, Tobias Soloschenko</p>

                    <p><strong>Version:</strong> 6.x</p>

                    
                </div>

                

                

<h2 id="modelsforms_3">11.3 Wicket forms</h2>
<p class="paragraph"/>Web applications use HTML forms to collect user input and send it to the server. Wicket provides <code>org.apache.wicket.markup.html.form.Form</code> class to handle web forms. This component must be bound to &#60;form&#62; tag. The following snippet shows how to create a very basic Wicket form in a page:<p class="paragraph"/>Html:<p class="paragraph"/><div class="code"><pre>&#60;form wicket:id=<span class="java&#45;quote">"form"</span>&#62;
    &#60;input type=<span class="java&#45;quote">"submit"</span> value=<span class="java&#45;quote">"submit"</span>/&#62;
&#60;/form&#62;</pre></div><p class="paragraph"/>
Java code:<p class="paragraph"/><div class="code"><pre>Form form = <span class="java&#45;keyword">new</span> Form(<span class="java&#45;quote">"form"</span>)&#123;
    @Override
    <span class="java&#45;keyword">protected</span> void onSubmit() &#123;
    	<span class="java&#45;object">System</span>.out.println(<span class="java&#45;quote">"Form submitted."</span>);
    &#125;
&#125;;
add(form);</pre></div><p class="paragraph"/>Method onSubmit is called whenever a form has been submitted and it can be overridden to perform custom actions. Please note that a Wicket form can be submitted using a standard HTML submit button which is not mapped to any component (i.e. it does not have a wicket:id attribute). 
In the next chapter we will continue to explore Wicket forms and we will see how to submit forms using special components which implement interface <code>org.apache.wicket.markup.html.form.IFormSubmitter</code>.<p class="paragraph"/><h3>Form and models</h3><p class="paragraph"/>A form should contain some input fields (like text fields, check boxes, radio buttons, drop-down lists, text areas, etc.) to interact with users. Wicket provides an abstraction for all these kinds of elements with component org.apache.wicket.markup.html.form.FormComponent:<p class="paragraph"/><img border="0" class="center" src="../img/uml-form-component.png"></img><p class="paragraph"/>The purpose of FormComponent is to store the corresponding user input into its model when the form is submitted. The form is responsible for mapping input values to the corresponding components, avoiding us the burden of manually synchronizing models with input fields and vice versa.<p class="paragraph"/><h3>Login form</h3><p class="paragraph"/>As first example of interaction between the form and its models, we will build a classic login form which asks for username and password (project LoginForm).<p class="paragraph"/><blockquote class="warning">
The topic of security will be discussed later in chapter 20. The following form is for example purposes only and is not suited for a real application.
If you need to use a login form you should consider to use component <code>org.apache.wicket.authroles.authentication.panel.SignInPanel</code> shipped with Wicket.
</blockquote><p class="paragraph"/>This form needs two text fields, one of which must be a password field. We should also use a label to display the result of login process1. For the sake of simplicity, the login logic is all inside onSubmit and is quite trivial.<p class="paragraph"/>The following is a possible implementation of our form:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> class LoginForm <span class="java&#45;keyword">extends</span> Form &#123;<p class="paragraph"/>	<span class="java&#45;keyword">private</span> TextField usernameField;
	<span class="java&#45;keyword">private</span> PasswordTextField passwordField;
	<span class="java&#45;keyword">private</span> Label loginStatus;<p class="paragraph"/>	<span class="java&#45;keyword">public</span> LoginForm(<span class="java&#45;object">String</span> id) &#123;
		<span class="java&#45;keyword">super</span>(id);<p class="paragraph"/>		usernameField = <span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"username"</span>, Model.of(<span class="java&#45;quote">""</span>));
		passwordField = <span class="java&#45;keyword">new</span> PasswordTextField(<span class="java&#45;quote">"password"</span>, Model.of(<span class="java&#45;quote">""</span>));			
		loginStatus = <span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"loginStatus"</span>, Model.of(<span class="java&#45;quote">""</span>));<p class="paragraph"/>		add(usernameField);
		add(passwordField);
		add(loginStatus);
	&#125;<p class="paragraph"/>	<span class="java&#45;keyword">public</span> <span class="java&#45;keyword">final</span> void onSubmit() &#123;
		<span class="java&#45;object">String</span> username = (<span class="java&#45;object">String</span>)usernameField.getDefaultModelObject();
		<span class="java&#45;object">String</span> password = (<span class="java&#45;object">String</span>)passwordField.getDefaultModelObject();<p class="paragraph"/>		<span class="java&#45;keyword">if</span>(username.equals(<span class="java&#45;quote">"test"</span>) &#38;&#38; password.equals(<span class="java&#45;quote">"test"</span>))
			loginStatus.setDefaultModelObject(<span class="java&#45;quote">"Congratulations!"</span>);
		<span class="java&#45;keyword">else</span>
			loginStatus.setDefaultModelObject(<span class="java&#45;quote">"Wrong username or password!"</span>);			
	&#125;
&#125;</pre></div><p class="paragraph"/>Inside form's constructor we build the three components used in the form and we assign them a model containing an empty string:<p class="paragraph"/><div class="code"><pre>usernameField = <span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"username"</span>, Model.of(<span class="java&#45;quote">""</span>));
passwordField = <span class="java&#45;keyword">new</span> PasswordTextField(<span class="java&#45;quote">"password"</span>, Model.of(<span class="java&#45;quote">""</span>));			
loginStatus = <span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"loginStatus"</span>, Model.of(<span class="java&#45;quote">""</span>));</pre></div><p class="paragraph"/>If we don't provide a model to a form component, we will get the following exception on form submission:<p class="paragraph"/><div class="code"><pre>java.lang.IllegalStateException: Attempt to set model object on <span class="java&#45;keyword">null</span> model of component:</pre></div><p class="paragraph"/>Component TextField corresponds to the standard text field, without any particular behavior or restriction on the allowed values. We must bind this component to the &#60;input&#62; tag with the attribute type set to "text". PasswordTextField is a subtype of TextFiled and it must be used with an &#60;input&#62; tag with the attribute type set to"password". For security reasons component PasswordTextField cleans its value at each request, so it wil be always empty after the form has been rendered. By default PasswordTextField fields are required, meaning that if we left them empty, the form won't be submitted (i.e. onSubmit won't be called). Class FormComponent provides method setRequired(boolean required) to change this behavior. Inside onSubmit, to get/set model objects we have used shortcut methods setDefaultModelObject and getDefaultModelObject. Both methods are defined in class Component (see class diagram from Illustration 9.1).<p class="paragraph"/>The following are the possible markup and code for the login page:<p class="paragraph"/>Html:<p class="paragraph"/><div class="code"><pre>&#60;html&#62;
	&#60;head&#62;
  		&#60;title&#62;Login page&#60;/title&#62;
	&#60;/head&#62;
	&#60;body&#62;
		&#60;form id=<span class="java&#45;quote">"loginForm"</span> method=<span class="java&#45;quote">"get"</span> wicket:id=<span class="java&#45;quote">"loginForm"</span>&#62;
  			&#60;fieldset&#62;
    			&#60;legend style=<span class="java&#45;quote">"color: &#35;F90"</span>&#62;Login&#60;/legend&#62;
    				&#60;p wicket:id=<span class="java&#45;quote">"loginStatus"</span>&#62;&#60;/p&#62;
    				&#60;span&#62;Username: &#60;/span&#62;&#60;input wicket:id=<span class="java&#45;quote">"username"</span> type=<span class="java&#45;quote">"text"</span> id=<span class="java&#45;quote">"username"</span> /&#62;&#60;br/&#62;
    				&#60;span&#62;Password: &#60;/span&#62;&#60;input wicket:id=<span class="java&#45;quote">"password"</span> type=<span class="java&#45;quote">"password"</span> id=<span class="java&#45;quote">"password"</span> /&#62;
    				&#60;p&#62;
    					&#60;input type=<span class="java&#45;quote">"submit"</span> name=<span class="java&#45;quote">"Login"</span> value=<span class="java&#45;quote">"Login"</span>/&#62;
    				&#60;/p&#62;
  	   	    &#60;/fieldset&#62;
		&#60;/form&#62;
	&#60;/body&#62;
&#60;/html&#62;</pre></div><p class="paragraph"/>Java code:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> class HomePage <span class="java&#45;keyword">extends</span> WebPage &#123;<p class="paragraph"/>   <span class="java&#45;keyword">public</span> HomePage(<span class="java&#45;keyword">final</span> PageParameters parameters) &#123;<p class="paragraph"/>		<span class="java&#45;keyword">super</span>(parameters);
    	add(<span class="java&#45;keyword">new</span> LoginForm(<span class="java&#45;quote">"loginForm"</span>));<p class="paragraph"/>    &#125;
&#125;</pre></div><p class="paragraph"/>The example shows how Wicket form components can be used to store user input inside their model. However we can dramatically improve the form code using CompoundPropertyModel and its ability to access the properties of its model object. The revisited code is the following (the LoginFormRevisited project):<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> class LoginForm <span class="java&#45;keyword">extends</span> Form&#123;<p class="paragraph"/>		<span class="java&#45;keyword">private</span> <span class="java&#45;object">String</span> username;
		<span class="java&#45;keyword">private</span> <span class="java&#45;object">String</span> password;
		<span class="java&#45;keyword">private</span> <span class="java&#45;object">String</span> loginStatus;<p class="paragraph"/>		<span class="java&#45;keyword">public</span> LoginForm(<span class="java&#45;object">String</span> id) &#123;
			<span class="java&#45;keyword">super</span>(id);			
			setDefaultModel(<span class="java&#45;keyword">new</span> CompoundPropertyModel(<span class="java&#45;keyword">this</span>));<p class="paragraph"/>			add(<span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"username"</span>));
			add(<span class="java&#45;keyword">new</span> PasswordTextField(<span class="java&#45;quote">"password"</span>));
			add(<span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"loginStatus"</span>));
		&#125;<p class="paragraph"/>		<span class="java&#45;keyword">public</span> <span class="java&#45;keyword">final</span> void onSubmit() &#123;			
			<span class="java&#45;keyword">if</span>(username.equals(<span class="java&#45;quote">"test"</span>) &#38;&#38; password.equals(<span class="java&#45;quote">"test"</span>))
				loginStatus = <span class="java&#45;quote">"Congratulations!"</span>;
			<span class="java&#45;keyword">else</span>
				loginStatus = <span class="java&#45;quote">"Wrong username or password !"</span>;			
		&#125;
	&#125;</pre></div><p class="paragraph"/>In this version the form itself is used as model object for its CompoundPropertyModel. This allows children components to have direct access to form fields and use them as backing objects, without explicitly creating a model for themselves.<p class="paragraph"/><blockquote class="note">
Keep in mind that when CompoundPropertyModel is inherited, it does not consider the ids of traversed containers for the final property expression, but it will always use the id of the visited child. To understand this potential pitfall, let's consider the following initialization code of a page:<p class="paragraph"/><div class="code"><pre>//Create a person named 'John Smith'
Person person = <span class="java&#45;keyword">new</span> Person(<span class="java&#45;quote">"John"</span>, <span class="java&#45;quote">"Smith"</span>);
//Create a person named 'Jill Smith'
Person spouse = <span class="java&#45;keyword">new</span> Person(<span class="java&#45;quote">"Jill"</span>, <span class="java&#45;quote">"Smith"</span>);
//Set Jill as John's spouse
person.setSpouse(spouse);<p class="paragraph"/>setDefaultModel(<span class="java&#45;keyword">new</span> CompoundPropertyModel(person));
WebMarkupContainer spouse = <span class="java&#45;keyword">new</span> WebMarkupContainer(<span class="java&#45;quote">"spouse"</span>);
Label name;
spouse.add(name = <span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"name"</span>));<p class="paragraph"/>add(spouse);</pre></div><p class="paragraph"/>The value displayed by label "name" will be "John" and not the spouse's name  "Jill" as you may expect. In this example the label doesn't own a model, so it must search up its container hierarchy for an inheritable model. However, its container (WebMarkup Container with id 'spouse') doesn't own a model, hence the request for a model is forwarded to the parent container, which in this case is the page. In the end the label inherits CompoundPropertyModel from page but only its own id is used for the property expression. The containers in between are never taken into account for the final property expression.
</blockquote>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/urls.html">&lt;&lt; <strong>10</strong><span>Wicket Links and URL generation</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
Copyright &copy; 2013-2015 ‚Äî <a href="http://www.apache.org/" target="_blank">The Apache Software Foundation</a> 
                      ‚Äî <b style="color:#E8590A !important;">(Generated on: 2015-04-08)</b>

    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
