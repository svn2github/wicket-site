<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>18.3 Built-in AJAX behaviors 6.x</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/howToSource.html"><strong>2</strong><span>How to use the example code</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/whyLearn.html"><strong>3</strong><span>Why should I learn Wicket?</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/helloWorld.html"><strong>4</strong><span>Wicket says &ldquo;Hello world!&rdquo;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/layout.html"><strong>5</strong><span>Wicket as page layout manager</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/keepControl.html"><strong>6</strong><span>Keeping control over HTML</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/componentLifecycle.html"><strong>7</strong><span>Components lifecycle</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/versioningCaching.html"><strong>8</strong><span>Page versioning and caching</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/requestProcessing.html"><strong>9</strong><span>Under the hood of the request processing</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/urls.html"><strong>10</strong><span>Wicket Links and URL generation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/modelsforms.html"><strong>11</strong><span>Wicket models and forms</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/repeaters.html"><strong>13</strong><span>Displaying multiple items with repeaters</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/i18n.html"><strong>14</strong><span>Internationalization with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/resources.html"><strong>15</strong><span>Resource management with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jsintegration.html"><strong>16</strong><span>An example of integration with JavaScript</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/advanced.html"><strong>17</strong><span>Wicket advanced topics</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/ajax.html"><strong>18</strong><span>Working with AJAX</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jee.html"><strong>19</strong><span>Integration with enterprise containers</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/nativewebsockets.html"><strong>20</strong><span>Native WebSockets</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/security.html"><strong>21</strong><span>Security with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testing.html"><strong>22</strong><span>Test Driven Development with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testingspring.html"><strong>23</strong><span>Test Driven Development with Wicket and Spring</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/bestpractices.html"><strong>24</strong><span>Wicket Best Practices</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/internals.html"><strong>25</strong><span>Wicket Internals</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/maven.html"><strong>26</strong><span>Working with Maven (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/wicketstuff.html"><strong>27</strong><span>Project WicketStuff (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/redirects.html"><strong>28</strong><span>Lost In Redirection With Apache Wicket (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/contributing.html"><strong>29</strong><span>Contributing to this guide (Appendix)</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        <span id="logo"><a href="/" target="_blank"><img height="80px" src="http://wicket.apache.org/guide/img/apache-wicket.png"/></a></span>
        
        
        <span id="sponsor"><a href="http://www.apache.org/" target="_blank"><img height="60px" src="http://wicket.apache.org/guide/img/asf_logo.gif"/></a></span>
        
    </div>
    <p>Free Online Guide for Apache Wicket framework</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/advanced.html">&lt;&lt; <strong>17</strong><span>Wicket advanced topics</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/jee.html"><strong>19</strong><span>Integration with enterprise containers</span> >></a></div>
                


                <div class="project">
                    <h1>18.3 Built-in AJAX behaviors - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Andrea Del Bene, Martin Grigorov, Carsten Hufe, Christian Kroemer, Daniel Bartl, Paul Bor»ô, Tobias Soloschenko</p>

                    <p><strong>Version:</strong> 6.x</p>

                    
                </div>

                

                

<h2 id="ajax_3">18.3 Built-in AJAX behaviors</h2>
<p class="paragraph"/>In addition to specific components, Wicket offers also a set of built in AJAX behaviors that can be used to easily add AJAX functionalities to existing components. As we will see in this paragraph AJAX behaviors can be used also to ajaxify components that weren't initially designed to work with this technology. All the following behaviors are inside package <code>org.apache.wicket.ajax</code>.<p class="paragraph"/><h3>AjaxEventBehavior</h3><p class="paragraph"/>AjaxEventBehavior allows to handle a JavaScript event (like click, change, etc...) on server side via AJAX. Its constructor takes in input the name of the event that must be handled. Every time this event is fired for a given component on client side, the callback method <code>onEvent(AjaxRequestTarget target)</code> is executed. onEvent is abstract, hence we must implement it to tell <code>AjaxEventBehavior</code> what to do when the specified event occurs.<p class="paragraph"/>In project <code>AjaxEventBehaviorExample</code> we used this behavior to build a ‚Äúclickable‚Äù Label component that counts the number of clicks. Here is the code from the home page of the project:<p class="paragraph"/><strong class="bold">HTML:</strong>
<div class="code"><pre>&#60;body&#62;
  &#60;div wicket:id=<span class="java&#45;quote">"clickCounterLabel"</span>&#62;&#60;/div&#62;
  User has clicked &#60;span wicket:id=<span class="java&#45;quote">"clickCounter"</span>&#62;&#60;/span&#62; time/s on the label above.
&#60;/body&#62;</pre></div><p class="paragraph"/><strong class="bold">Java Code:</strong>
<div class="code"><pre><span class="java&#45;keyword">public</span> class HomePage <span class="java&#45;keyword">extends</span> WebPage &#123;
   <span class="java&#45;keyword">public</span> HomePage(<span class="java&#45;keyword">final</span> PageParameters parameters) &#123;
      <span class="java&#45;keyword">super</span>(parameters);<p class="paragraph"/>      <span class="java&#45;keyword">final</span> ClickCounterLabel clickCounterLabel = 
         <span class="java&#45;keyword">new</span> ClickCounterLabel(<span class="java&#45;quote">"clickCounterLabel"</span>, <span class="java&#45;quote">"Click on me!"</span>);
      <span class="java&#45;keyword">final</span> Label clickCounter =
         <span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"clickCounter"</span>, <span class="java&#45;keyword">new</span> PropertyModel(clickCounterLabel, <span class="java&#45;quote">"clickCounter"</span>));<p class="paragraph"/>      
      clickCounterLabel.setOutputMarkupId(<span class="java&#45;keyword">true</span>);
      clickCounterLabel.add(<span class="java&#45;keyword">new</span> AjaxEventBehavior(<span class="java&#45;quote">"click"</span>)&#123;<p class="paragraph"/>         @Override
         <span class="java&#45;keyword">protected</span> void onEvent(AjaxRequestTarget target) &#123;
            clickCounterLabel.clickCounter++;
            target.add(clickCounter);
         &#125;         
      &#125;);<p class="paragraph"/>      add(clickCounterLabel);
      add(clickCounter.setOutputMarkupId(<span class="java&#45;keyword">true</span>));      
    &#125;
&#125;<p class="paragraph"/>class ClickCounterLabel <span class="java&#45;keyword">extends</span> Label&#123;
   <span class="java&#45;keyword">public</span> <span class="java&#45;object">int</span> clickCounter;<p class="paragraph"/>   <span class="java&#45;keyword">public</span> ClickCounterLabel(<span class="java&#45;object">String</span> id) &#123;
      <span class="java&#45;keyword">super</span>(id);
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">public</span> ClickCounterLabel(<span class="java&#45;object">String</span> id, IModel&#60;?&#62; model) &#123;
      <span class="java&#45;keyword">super</span>(id, model);
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">public</span> ClickCounterLabel(<span class="java&#45;object">String</span> id, <span class="java&#45;object">String</span> label) &#123;
      <span class="java&#45;keyword">super</span>(id, label);      
   &#125;
&#125;</pre></div><p class="paragraph"/>In the code above we have declared a custom label class named <code>ClickCounterLabel</code> that exposes a public integer field called clickCounter. Then, in the home page we have attached a <code>AjaxEventBehavior</code> to our custom label to increment clickCounter every time it receives a click event.<p class="paragraph"/>The number of clicks is displayed with another standard label named <code>clickCounter</code>.<p class="paragraph"/><h3>AjaxFormSubmitBehavior</h3><p class="paragraph"/>This behavior allows to send a form via AJAX when the component it is attached to receives the specified event. The component doesn't need to be inside the form if we use the constructor version that, in addition to the name of the event, takes in input also the target form:<p class="paragraph"/><div class="code"><pre>Form form = <span class="java&#45;keyword">new</span> Form(<span class="java&#45;quote">"form"</span>);		
Button submitButton = <span class="java&#45;keyword">new</span> Button(<span class="java&#45;quote">"submitButton"</span>);
//submit form when button is clicked		
submitButton.add(<span class="java&#45;keyword">new</span> AjaxFormSubmitBehavior(form, <span class="java&#45;quote">"click"</span>)&#123;&#125;);
add(form);
add(submitButton);</pre></div><p class="paragraph"/><h3>AjaxFormComponentUpdatingBehavior</h3><p class="paragraph"/>This behavior updates the model of the form component it is attached to when a given event occurs. The standard form submitting process is skipped and the behavior validates only its form component.<p class="paragraph"/>The behavior doesn't work with radio buttons and checkboxes. For these kinds of components we must use <code>AjaxFormChoiceComponentUpdatingBehavior</code>:<p class="paragraph"/><div class="code"><pre>Form form = <span class="java&#45;keyword">new</span> Form(<span class="java&#45;quote">"form"</span>);		
TextField textField = <span class="java&#45;keyword">new</span> TextField(<span class="java&#45;quote">"textField"</span>, Model.of(<span class="java&#45;quote">""</span>));
//update the model of the text field each time event <span class="java&#45;quote">"change"</span> occurs
textField.add(<span class="java&#45;keyword">new</span> AjaxFormComponentUpdatingBehavior(<span class="java&#45;quote">"change"</span>)&#123;
	@Override
	<span class="java&#45;keyword">protected</span> void onUpdate(AjaxRequestTarget target) &#123;
		//...				
	&#125;
&#125;);
add(form.add(textField));</pre></div><p class="paragraph"/><h3>AbstractAjaxTimerBehavior</h3><p class="paragraph"/><code>AbstractAjaxTimerBehavior</code> executes callback method <code>onTimer(AjaxRequestTarget target)</code> at a specified interval. The behavior can be stopped and restarted at a later time with methods <code>stop(AjaxRequestTarget target)</code> and <code>restart(AjaxRequestTarget target)</code>:<p class="paragraph"/><div class="code"><pre>Label dynamicLabel = <span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"dynamicLabel"</span>);
//trigger an AJAX request every three seconds		
dynamicLabel.add(<span class="java&#45;keyword">new</span> AbstractAjaxTimerBehavior(Duration.seconds(3)) &#123;			
	@Override
	<span class="java&#45;keyword">protected</span> void onTimer(AjaxRequestTarget target) &#123;
		//...				
	&#125;
&#125;);
add(dynamicLabel);</pre></div><p class="paragraph"/><blockquote class="note">
As side effect AJAX components and behaviors make their hosting page stateful. As a consequence they are unfit for those pages that must stay stateless. Project WicketStuff provides a module with a stateless version of the most common AJAX components and behaviors. You can find more informations on this module in Appendix B. 
</blockquote>



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/advanced.html">&lt;&lt; <strong>17</strong><span>Wicket advanced topics</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/jee.html"><strong>19</strong><span>Integration with enterprise containers</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
Copyright &copy; 2013-2015 ‚Äî <a href="http://www.apache.org/" target="_blank">The Apache Software Foundation</a> 
                      ‚Äî <b style="color:#E8590A !important;">(Generated on: 2015-04-08)</b>

    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
