<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>11.2 Models and JavaBeans 6.x</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/howToSource.html"><strong>2</strong><span>How to use the example code</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/whyLearn.html"><strong>3</strong><span>Why should I learn Wicket?</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/helloWorld.html"><strong>4</strong><span>Wicket says &ldquo;Hello world!&rdquo;</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/layout.html"><strong>5</strong><span>Wicket as page layout manager</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/keepControl.html"><strong>6</strong><span>Keeping control over HTML</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/componentLifecycle.html"><strong>7</strong><span>Components lifecycle</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/versioningCaching.html"><strong>8</strong><span>Page versioning and caching</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/requestProcessing.html"><strong>9</strong><span>Under the hood of the request processing</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/urls.html"><strong>10</strong><span>Wicket Links and URL generation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/modelsforms.html"><strong>11</strong><span>Wicket models and forms</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/repeaters.html"><strong>13</strong><span>Displaying multiple items with repeaters</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/i18n.html"><strong>14</strong><span>Internationalization with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/resources.html"><strong>15</strong><span>Resource management with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jsintegration.html"><strong>16</strong><span>An example of integration with JavaScript</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/advanced.html"><strong>17</strong><span>Wicket advanced topics</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/ajax.html"><strong>18</strong><span>Working with AJAX</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/jee.html"><strong>19</strong><span>Integration with enterprise containers</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/nativewebsockets.html"><strong>20</strong><span>Native WebSockets</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/security.html"><strong>21</strong><span>Security with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testing.html"><strong>22</strong><span>Test Driven Development with Wicket</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testingspring.html"><strong>23</strong><span>Test Driven Development with Wicket and Spring</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/bestpractices.html"><strong>24</strong><span>Wicket Best Practices</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/internals.html"><strong>25</strong><span>Wicket Internals</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/maven.html"><strong>26</strong><span>Working with Maven (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/wicketstuff.html"><strong>27</strong><span>Project WicketStuff (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/redirects.html"><strong>28</strong><span>Lost In Redirection With Apache Wicket (Appendix)</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/contributing.html"><strong>29</strong><span>Contributing to this guide (Appendix)</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        <span id="logo"><a href="/" target="_blank"><img height="80px" src="http://wicket.apache.org/guide/img/apache-wicket.png"/></a></span>
        
        
        <span id="sponsor"><a href="http://www.apache.org/" target="_blank"><img height="60px" src="http://wicket.apache.org/guide/img/asf_logo.gif"/></a></span>
        
    </div>
    <p>Free Online Guide for Apache Wicket framework</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/urls.html">&lt;&lt; <strong>10</strong><span>Wicket Links and URL generation</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span> >></a></div>
                


                <div class="project">
                    <h1>11.2 Models and JavaBeans - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Andrea Del Bene, Martin Grigorov, Carsten Hufe, Christian Kroemer, Daniel Bartl, Paul Bor»ô, Tobias Soloschenko</p>

                    <p><strong>Version:</strong> 6.x</p>

                    
                </div>

                

                

<h2 id="modelsforms_2">11.2 Models and JavaBeans</h2>
<p class="paragraph"/>One of the main goals of Wicket is to use JavaBeans and POJO as data model, overcoming the impedance mismatch between web technologies and OO paradigm. In order to make this task as easy as possible, Wicket offers two special model classes: <code>org.apache.wicket.model.PropertyModel</code> and <code>org.apache.wicket.model.CompoundPropertyModel</code>. We will see how to use them in the next two examples, using the following JavaBean as the data object:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">public</span> class Person <span class="java&#45;keyword">implements</span> Serializable &#123;<p class="paragraph"/>	<span class="java&#45;keyword">private</span> <span class="java&#45;object">String</span> name;
	<span class="java&#45;keyword">private</span> <span class="java&#45;object">String</span> surname;
	<span class="java&#45;keyword">private</span> <span class="java&#45;object">String</span> address;
	<span class="java&#45;keyword">private</span> <span class="java&#45;object">String</span> email;
	<span class="java&#45;keyword">private</span> <span class="java&#45;object">String</span> passportCode;<p class="paragraph"/>	<span class="java&#45;keyword">private</span> Person spouse;
	<span class="java&#45;keyword">private</span> List&#60;Person&#62; children;<p class="paragraph"/>	<span class="java&#45;keyword">public</span> Person(<span class="java&#45;object">String</span> name, <span class="java&#45;object">String</span> surname) &#123;
		<span class="java&#45;keyword">this</span>.name = name;
		<span class="java&#45;keyword">this</span>.surname = surname;
	&#125;<p class="paragraph"/>	<span class="java&#45;keyword">public</span> <span class="java&#45;object">String</span> getFullName()&#123;
   		<span class="java&#45;keyword">return</span> name + <span class="java&#45;quote">" "</span> + surname;
	&#125;<p class="paragraph"/>	/&#42; 	 
	 &#42; Getters and setters <span class="java&#45;keyword">for</span> <span class="java&#45;keyword">private</span> fields
     &#42;/
&#125;</pre></div><p class="paragraph"/><h3>PropertyModel</h3><p class="paragraph"/>Let's say we want to display the name field of a Person instance with a label. We could, of course, use the Model class like we did in the previous example, obtaining something like this:<p class="paragraph"/><div class="code"><pre>Person person = <span class="java&#45;keyword">new</span> Person();		
//load person's data...<p class="paragraph"/>Label label = <span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"name"</span>, <span class="java&#45;keyword">new</span> Model(person.getName()));</pre></div><p class="paragraph"/>However this solution has a huge drawback: the text displayed by the label will be static and if we change the value of the field, the label won't update its content. Instead, to always display the current value of a class field, we should use the <code>org.apache.wicket.model.PropertyModel</code> model class:<p class="paragraph"/><div class="code"><pre>Person person = <span class="java&#45;keyword">new</span> Person();		
//load person's data...<p class="paragraph"/>Label label = <span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"name"</span>, <span class="java&#45;keyword">new</span> PropertyModel(person, <span class="java&#45;quote">"name"</span>));</pre></div><p class="paragraph"/>PropertyModel has just one constructor with two parameters: the model object (person in our example) and the name of the property we want to read/write ("name" in our example). This last parameter is called property expression. Internally, methods getObject/setObject use property expression to get/set property's value. To resolve class properties PropertyModel uses class <code>org.apache.wicket.util.lang.Property</code> Resolver which can access any kind of property, private fields included.<p class="paragraph"/>Just like the Java language, property expressions support dotted notation to select sub properties. So if we want to display the name of the Person's spouse we can write:<p class="paragraph"/><div class="code"><pre>Label label = <span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"spouseName"</span>, <span class="java&#45;keyword">new</span> PropertyModel(person, <span class="java&#45;quote">"spouse.name"</span>));</pre></div><p class="paragraph"/><blockquote class="note">
PropertyModel is null-safe, which means we don't have to worry if property expression includes a null value in its path. If such a value is encountered, an empty string will be returned.
</blockquote><p class="paragraph"/>If property is an array or a List, we can specify an index after its name. For example, to display the name of the first child of a Person we can write the following property expression:<p class="paragraph"/><div class="code"><pre>Label label = <span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"firstChildName"</span>, <span class="java&#45;keyword">new</span> PropertyModel(person, <span class="java&#45;quote">"children.0.name"</span>));</pre></div><p class="paragraph"/>Indexes and map keys can be also specified using squared brackets:<p class="paragraph"/><div class="code"><pre>children&#91;0&#93;.name &#8230;
mapField&#91;key&#93;.subfield ...</pre></div><p class="paragraph"/><h3>CompoundPropertyModel and model inheritance</h3><p class="paragraph"/>Class <code>org.apache.wicket.model.CompoundPropertyModel</code> is a particular kind of model which is usually used in conjunction with another Wicket feature called model inheritance. With this feature, when a component needs to use a model but none has been assigned to it, it will search through the whole container hierarchy for a parent with an inheritable model. Inheritable models are those which implement interface <code>org.apache.wicket.model.IComponentInheritedModel</code> and <code>CompoundPropertyModel</code> is one of them. Once a <code>CompoundPropertyModel</code> has been inherited by a component, it will behave just like a PropertyModel using the id of the component as property expression. As a consequence, to make the most of CompoundPropertyModel we must assign it to one of the containers of a given component, rather than directly to the component itself.<p class="paragraph"/>For example if we use CompoundPropertyModel with the previous example (display spouse's name), the code would become like this:<p class="paragraph"/><div class="code"><pre>//set CompoundPropertyModel as model <span class="java&#45;keyword">for</span> the container of the label
setDefaultModel(<span class="java&#45;keyword">new</span> CompoundPropertyModel(person));<p class="paragraph"/>Label label = <span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"spouse.name"</span>);<p class="paragraph"/>add(label);</pre></div><p class="paragraph"/>Note that now the id of the label is equal to the property expression previously used with PropertyModel. Now as a further example let's say we want to extend the code above to display all of the main informations of a person (name, surname, address and email). All we have to do is to add one label for every additional information using the relative property expression as component id:<p class="paragraph"/><div class="code"><pre>//Create a person named 'John Smith'
Person person = <span class="java&#45;keyword">new</span> Person(<span class="java&#45;quote">"John"</span>, <span class="java&#45;quote">"Smith"</span>);
setDefaultModel(<span class="java&#45;keyword">new</span> CompoundPropertyModel(person));<p class="paragraph"/>add(<span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"name"</span>));
add(<span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"surname"</span>));
add(<span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"address"</span>));
add(<span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"email"</span>));
add(<span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"spouse.name"</span>));</pre></div><p class="paragraph"/>CompoundPropertyModel can save us a lot of boring coding if we choose the id of components according to properties name. However it's also possible to use this type of model even if the id of a component does not correspond to a valid property expression. The method bind(String property) allows to create a property model from a given CompoundPropertyModel using the provided parameter as property expression. For example if we want to display the spouse's name in a label having "xyz" as id, we can write the following code:<p class="paragraph"/><div class="code"><pre>//Create a person named 'John Smith'
Person person = <span class="java&#45;keyword">new</span> Person(<span class="java&#45;quote">"John"</span>, <span class="java&#45;quote">"Smith"</span>);
CompoundPropertyModel compoundModel;
setDefaultModel(compoundModel = <span class="java&#45;keyword">new</span> CompoundPropertyModel(person));<p class="paragraph"/>add(<span class="java&#45;keyword">new</span> Label(<span class="java&#45;quote">"xyz"</span>, compoundModel.bind(<span class="java&#45;quote">"spouse.name"</span>)));</pre></div><p class="paragraph"/>CompoundPropertyModel are particularly useful when used in combination with Wicket forms, as we will see in the next paragraph.<p class="paragraph"/><blockquote class="note">
Model is referred to as static model because the result of its method getObject is fixed and it is not dynamically evaluated each time the method is called. In contrast, models like PropertyModel and CompoundProperty Model are called dynamic models.
</blockquote>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/urls.html">&lt;&lt; <strong>10</strong><span>Wicket Links and URL generation</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/forms2.html"><strong>12</strong><span>Wicket forms in detail</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
Copyright &copy; 2013-2015 ‚Äî <a href="http://www.apache.org/" target="_blank">The Apache Software Foundation</a> 
                      ‚Äî <b style="color:#E8590A !important;">(Generated on: 2015-04-08)</b>

    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
